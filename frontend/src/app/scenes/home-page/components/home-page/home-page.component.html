<app-page-header></app-page-header>
<div class="home-panel">
  <div class="left-col">
    <div class="ui left vertical menu bar">
      <a class="item">
        <div class="ui very relaxed horizontal list">
          <div class="item">
            <img class="ui user-pic image" src="{{ mainUser.avatarUrl }}" />
            <div class="content">
              <a class="header"
                >{{ mainUser.firstName }} {{ mainUser.secondName }}</a
              >
            </div>
          </div>
        </div>
      </a>
      <a class="item">
        <a class="item">
          <i class="clock outline icon"></i>
          Meetings history
        </a>
        <a class="item">
          <i class="calendar alternate outline icon"></i>
          Schedule meeting
        </a>
        <a class="item">
          <i class="share icon"></i>
          Enter the meeting
        </a>
      </a>
      <a (click)="contactsVisibility = !contactsVisibility" class="item header"
        >Contacts
        <button
          (click)="addNewContact()"
          class="ui mini basic button edit-button"
        >
          New
        </button>
      </a>
      <div
        [hidden]="!contactsVisibility"
        *ngFor="let contact of contacts"
        class="user-list ui middle aligned selection list"
      >
        <div
          [ngClass]="isContactActive(contact) ? 'active item' : 'item'"
          (click)="onUserClick(contact)"
        >
          <img
            class="ui avatar image"
            src="{{ contact.contactner.avatarUrl }}"
          />
          <div class="content">
            <div class="description">
              {{ contact.contactner.firstName }}
              {{ contact.contactner.secondName }}
            </div>
          </div>
        </div>
      </div>
      <a (click)="groupsVisibility = !groupsVisibility" class="item header"
        >Groups
        <button
          (click)="addNewGroup()"
          class="ui mini basic button edit-button"
        >
          New
        </button>
      </a>
      <div
        [hidden]="!groupsVisibility"
        *ngFor="let contact of contacts"
        class="user-list ui middle aligned selection list"
      >
        <div (click)="onGroupClick()" class="item">
          <img
            class="ui avatar image"
            src="{{ contact.contactner.avatarUrl }}"
          />
          <div class="content">
            <div class="description">
              {{ contact.contactner.firstName }}
              {{ contact.contactner.secondName }}
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="right-col">
    <div *ngIf="chatVisibility" class="actions">
      <div class="chat ui secondary segment">
        <div class="ui chat-inner feed">
          <div class="event chat-label">
            <div class="label">
              <img src="{{ contactSelected.contactner.avatarUrl }}" />
            </div>
            <div class="content">
              <div class="summary">
                <a class="user user-chat-label">
                  {{ contactSelected.contactner.firstName }}
                  {{ contactSelected.contactner.secondName }}
                </a>
              </div>
            </div>
          </div>

          <div
            *ngIf="messages.length == 0"
            class="ui large message vertically-aligned"
          >
            There is still no messages yet!
          </div>
          <div *ngFor="let message of messages" class="event message-event">
            <div class="label">
              <img src="{{ message.author?.avatarUrl }}" />
            </div>
            <div class="content">
              <div class="summary">
                <a class="user">
                  {{ message.author?.firstName }}
                  {{ message.author?.secondName }}
                </a>
                <div class="date">
                  {{ message.createdAt | date: "short" }}
                </div>
              </div>
              {{ message.message }}
            </div>
          </div>
        </div>
        <form
          class="ui form vertically-aligned"
          (ngSubmit)="sendMessage()"
          #chatForm="ngForm"
        >
          <div class="field">
            <textarea
              rows="2"
              placeholder="Print your message there"
              type="text"
              id="message"
              name="newMessage"
              [(ngModel)]="newMessage.message"
              required
            ></textarea>
          </div>
          <button
            class="ui button tiny send"
            type="submit"
            id="sendMessage"
            [disabled]="!chatForm.valid"
          >
            Send <i class="paper plane outline icon"></i>
          </button>
        </form>
      </div>
    </div>
    <div *ngIf="!chatVisibility" class="actions">
      <div class="vertically-aligned chat ui segment">
        <div class="text-aligned">
          <img
            class="ui centered small image"
            src="https://img.icons8.com/bubbles/100/000000/planner.png"
          />
          <span class="text-aligned">Schedule meeting</span>
        </div>
        <div class="text-aligned">
          <img
            class="ui centered small image"
            src="https://img.icons8.com/bubbles/100/000000/todo-list.png"
          />
          <span class="text-aligned">Meetings history</span>
        </div>
        <div class="text-aligned">
          <img
            class="ui centered small image"
            src="https://img.icons8.com/bubbles/100/000000/forward.png"
          />
          <span class="text-aligned header">Enter the meeting </span>
        </div>
      </div>
    </div>
  </div>
</div>
